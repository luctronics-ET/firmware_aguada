<script>
// Configuração centralizada da API
// As páginas do web server devem usar APIs locais (porta 8888)
// Para acessar backend PostgreSQL direto, usar BACKEND_API_URL
(() => {
  try {
    const DEFAULT_API_HOST = location.hostname || 'localhost';
    const DEFAULT_PORT = location.port || '8888';
    
    // API local (SQLite) - padrão para as páginas
    window.API_URL = window.API_URL || `${location.protocol}//${DEFAULT_API_HOST}:${DEFAULT_PORT}/api`;
    
    // API backend (PostgreSQL) - para casos especiais
    window.BACKEND_API_URL = window.BACKEND_API_URL || `${location.protocol}//${DEFAULT_API_HOST}:8765/api`;
    
    console.debug('[Aguada] API_URL (local) =', window.API_URL);
    console.debug('[Aguada] BACKEND_API_URL (PostgreSQL) =', window.BACKEND_API_URL);
  } catch (e) {
    console.warn('[Aguada] Falha ao definir API_URL dinamicamente, usando fallback localhost');
    window.API_URL = window.API_URL || 'http://localhost:8888/api';
    window.BACKEND_API_URL = window.BACKEND_API_URL || 'http://localhost:8765/api';
  }
})();
</script>
